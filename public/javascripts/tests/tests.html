<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>QUnit basic example</title>
  <link rel="stylesheet" href="https://code.jquery.com/qunit/qunit-1.20.0.css">
</head>
<body>
  <div id="qunit"></div>
  <div id="qunit-fixture"></div>
  <script src="https://code.jquery.com/qunit/qunit-1.20.0.js"></script>
  <script src="../communicationModule.js"></script>
  <script src="../mathModule.js"></script>
  <script src="../uiHelpersModule.js"></script>
  <script>    
    QUnit.test("descending order of array with ints after sort", function(assert) {
        var arr = [10, 29, 1, 2, 3, 21, 1, 90];
        
        arr.sort(wordCloud.mathModule.numberSorterDescending);
        
        assert.equal(arr[0], 90, "Value should be 90");
    });
    
    QUnit.test("sort array based on normal distribution", function(assert) {
        var arr = [10, 29, 1, 2, 3, 21, 1, 90, 87];
        
        arr = wordCloud.mathModule.normalDistributionSorter(arr);

        // The value in the middle of the array has to be the highest
        assert.equal(arr[4], 90, "Value should be 90");
    });
    
    QUnit.test("try to sort a string based on normal distribution", function(assert) {
        var str = "this will fail";
        
        raises(function() {
            wordCloud.mathModule.normalDistributionSorter(str)
        }, Error, "Must throw error to pass.");
    });
    
    QUnit.test("try to pass a number as property when doing normal distribution", function(assert) {
        var arr = [{name: "Christos"}, {name: "Max"}];
        
        raises(function() {
            wordCloud.mathModule.normalDistributionSorter(arr, 2)
        }, Error, "Must throw error to pass.");
    });
    
    QUnit.test("sort array with property based on normal distribution", function(assert) {
        var arr = [{age: 30}, {age: 57}];
        
        arr = wordCloud.mathModule.normalDistributionSorter(arr, "age");
        
        assert.equal(arr[0].age, 57, "Age should be 57");
    });

    QUnit.test("generate array with normal distributed numbers", function(assert) {
        var max = 2000;
        
        arr = wordCloud.mathModule.generateArrayWithNormalDistributedElements(max);
        
        assert.equal(arr.length, 10, "length of the array should be 10");
    }); 

    QUnit.test("check if generated array has normal distributed numbers", function(assert) {
        var max = 2000;
        
        arr = wordCloud.mathModule.generateArrayWithNormalDistributedElements(max);
        
        assert.ok(arr[4] > arr[3], "the element in the middle has to be the biggest number");
    });
    
    
    
    
    
    
    
    QUnit.test("check if DOM element created correctly", function(assert) {        
        var element = wordCloud.uiHelpersModule.createAHTMLElement("div", "testID", "testClass");
        
        assert.ok(element.id === "testID", "The searched element has to be in the DOM");
    });
    
    QUnit.test("try to pass a number as element type", function(assert) {        
        raises(function() {
            wordCloud.uiHelpersModule.createAHTMLElement(1, "testID", "testClass");
        }, Error, "The type has to be a string.");
    }); 
  
    QUnit.test("create an element with multiple classes", function(assert) {        
        var element = wordCloud.uiHelpersModule.createAHTMLElement("div", "testID", ["testClass1", "testClass2"]);

        assert.equal(element.classList, "testClass1,testClass2", "The element has two classes");    
    });
    
    QUnit.test("get an element based on its ID", function(assert) {        
        var element = wordCloud.uiHelpersModule.getHTMLElementBasedOnItsId("qunit");

        assert.ok(element, "The element exists");    
    });
    
    QUnit.test("get elements based on their CSS-class", function(assert) {        
        assert.expect(2);
        
        var elements = wordCloud.uiHelpersModule.getHTMLElementsBasedOnTheirClass("result");
        console.log(elements);
        assert.ok(elements, "The element exists");
        assert.equal(elements.length, 1, "There is only one element with this CSS-class");  
    });
    
    QUnit.test("try to apply CSS-styles to an element", function(assert) {
        var element = document.getElementById("qunit");
                     
        wordCloud.uiHelpersModule.applyStylingToAHTMLElement(element, {background: "red"});

        assert.equal(element.style.background, "red", "The element should have the new background color");  
    });
  
    QUnit.test("Try to apply CSS-styles to a not valid element", function(assert) {                    
        raises(function() {
         wordCloud.uiHelpersModule.applyStylingToAHTMLElement("test", {background: "red"});
         }, Error, "The element has to be a valid HTML element.");
    });
 
    QUnit.test("Try to apply invalid CSS-styles to an HTML-element", function(assert) {                    
        var element = document.getElementById("qunit");
        
        raises(function() {
            wordCloud.uiHelpersModule.applyStylingToAHTMLElement(element, "test");
         }, Error, "The element has to be a valid HTML element.");
    });
    
    QUnit.test("Apply element to another ", function(assert) {                    
        var element = document.getElementById("qunit");
        var child = document.createElement("div");
        
        wordCloud.uiHelpersModule.addElementToParentElement(child, element);
        
        assert.equal(child.parentElement.id, "qunit", "The element should have the new background color");  
    });  

    QUnit.test("Try to apply non HTML-element to another", function(assert) {                    
        var element = document.getElementById("qunit");
        var child = "";
        
       raises(function() {
            wordCloud.uiHelpersModule.addElementToParentElement(child, element);
         }, Error, "The elements have to be valid HTML-elements.");
    });  
  </script>
</body>
</html>